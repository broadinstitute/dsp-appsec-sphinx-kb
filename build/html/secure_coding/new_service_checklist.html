

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>New Service Checklist &#8212; dsp-security-knowledgebase 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Security 101 - Guidelines" href="security101.html" />
    <link rel="prev" title="Secure Coding" href="index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="security101.html" title="Security 101 - Guidelines"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Secure Coding"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">dsp-security-knowledgebase 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Secure Coding</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">New Service Checklist</a><ul>
<li><a class="reference internal" href="#your-microservice-and-github">Your microservice and Github</a></li>
<li><a class="reference internal" href="#scalability">Scalability</a></li>
<li><a class="reference internal" href="#logging">Logging</a></li>
<li><a class="reference internal" href="#instrumentation">Instrumentation</a></li>
<li><a class="reference internal" href="#deployment">Deployment</a></li>
<li><a class="reference internal" href="#encryption">Encryption</a></li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#authorization">Authorization</a></li>
<li><a class="reference internal" href="#compliance">Compliance</a></li>
<li><a class="reference internal" href="#code-scans">Code Scans</a></li>
<li><a class="reference internal" href="#other-security-considerations">Other Security Considerations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Secure Coding</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="security101.html"
                        title="next chapter">Security 101 - Guidelines</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/secure_coding/new_service_checklist.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="new-service-checklist">
<h1><a class="toc-backref" href="#id3">New Service Checklist</a><a class="headerlink" href="#new-service-checklist" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#new-service-checklist" id="id3">New Service Checklist</a><ul>
<li><a class="reference internal" href="#your-microservice-and-github" id="id4">Your microservice and Github</a></li>
<li><a class="reference internal" href="#scalability" id="id5">Scalability</a></li>
<li><a class="reference internal" href="#logging" id="id6">Logging</a></li>
<li><a class="reference internal" href="#instrumentation" id="id7">Instrumentation</a></li>
<li><a class="reference internal" href="#deployment" id="id8">Deployment</a></li>
<li><a class="reference internal" href="#encryption" id="id9">Encryption</a></li>
<li><a class="reference internal" href="#authentication" id="id10">Authentication</a></li>
<li><a class="reference internal" href="#authorization" id="id11">Authorization</a></li>
<li><a class="reference internal" href="#compliance" id="id12">Compliance</a></li>
<li><a class="reference internal" href="#code-scans" id="id13">Code Scans</a></li>
<li><a class="reference internal" href="#other-security-considerations" id="id14">Other Security Considerations</a></li>
</ul>
</li>
</ul>
</div>
<p>So you want to make a new service? Great!
Please make sure you have the following things in your code:</p>
<div class="section" id="your-microservice-and-github">
<h2><a class="toc-backref" href="#id4">Your microservice and Github</a><a class="headerlink" href="#your-microservice-and-github" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>Do you have a /status endpoint?</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Does it monitor real things like DB connections and other downstream dependencies?</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><strong>In Firecloud</strong>:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Deploying artifact:</dt>
<dd><ul class="first last">
<li>Your code can be compiled into a Docker. That means having a Dockerfile in your root. OR</li>
<li>Your code can be run in Google App Engine or Google Cloud Functions (serverless)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Any conf files that need to be used by the Docker at runtime should be in firecloud-develop repo.</dt>
<dd><ul class="first last">
<li>No secrets in these files! Use Vault!</li>
<li>Use Git-secrets to doublecheck!</li>
<li>Docker-compose file should be all set!</li>
</ul>
</dd>
</dl>
</li>
<li>Put your Secrets in Vault</li>
<li><dl class="first docutils">
<dt>Make sure your application can run in <a class="reference external" href="https://broadinstitute.atlassian.net/wiki/plugins/servlet/mobile?contentId=229212218#content/view/114755655">FIAB – Firecloud-in-a-Box</a></dt>
<dd><ul class="first last">
<li>And is in the fiab branch in Github</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>You have defined your necessary cloud resources and your Devops team knows (ie CloudSQL databases, bigquery tables, etc).</dt>
<dd><ul class="first last">
<li>This is so security and permissions and deployment can be properly set</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Independent of FC:</strong></dt>
<dd><ul class="first last">
<li><a class="reference external" href="https://broadinstitute.atlassian.net/wiki/plugins/servlet/mobile?contentId=229212218#content/view/114755655">Independent Deployment Services</a> this is in progress so please consult a devops to see where we are on this.</li>
<li><dl class="first docutils">
<dt>Deploying artifact - you need one</dt>
<dd><ul class="first last">
<li>Needs to deploy to GAE</li>
<li>OR be Dockerized with Dockerfile in Root</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Confs need to be considered and should be templatized so we can inject secrets at deploytime</dt>
<dd><ul class="first last">
<li>We prefer consul but will work with any template language (jinja, etc)</li>
<li>No secrets and few hardcodes!</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>If not using Docker/Kubernetes, include scripts in a /deploy folder</dt>
<dd><ul class="first last">
<li>Should also be templatized</li>
</ul>
</dd>
</dl>
</li>
<li>Use git-secrets in your repo</li>
<li><dl class="first docutils">
<dt>You have defined your necessary cloud resources and your Devops team knows (ie CloudSQL databases, bigquery tables, etc).</dt>
<dd><ul class="first last">
<li>This is so security and permissions and deployment can be properly set</li>
</ul>
</dd>
</dl>
</li>
<li>What kind of Test environment does it need? It’s own FC? No FC? Make sure you’ve talked to Devops about how you intend to test against other projects so that can be wrapped.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="scalability">
<h2><a class="toc-backref" href="#id5">Scalability</a><a class="headerlink" href="#scalability" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>Multiple instances of your code can be run at one time without conflicts.</dt>
<dd><ul class="first last">
<li>ie you can just keep slapping on instances of your code for scaling (horizontal)</li>
</ul>
</dd>
</dl>
</li>
<li>Does your code need a shared piece of infrastructure to help in scaling, like a Database or a Cache layer? Make sure your Devops team knows.</li>
<li>Make sure you’re set up with an Autoscale group and/or a Load-Balancer. Talk to your Devops team.</li>
</ul>
</div>
<div class="section" id="logging">
<h2><a class="toc-backref" href="#id6">Logging</a><a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>Does your code log out?</dt>
<dd><ul class="first last">
<li>Configurable to log to File and/or STDOUT.</li>
</ul>
</dd>
</dl>
</li>
<li>Does it have multiple, configurable log-levels (debug, info, warn, error)?</li>
<li>Does your logging engine support <a class="reference external" href="https://docs.sentry.io/quickstart/">Sentry?</a></li>
<li>Are there any Alerts that need to be set up on your logs?</li>
<li>Make sure your devops person knows if you’re logging to STDOUT or Logs so they can set up appropriate offsite logging?</li>
<li>Is the logging good enough? We should be able to know WHO did WHAT to WHAT OBJECT and WHEN?</li>
</ul>
</div>
<div class="section" id="instrumentation">
<h2><a class="toc-backref" href="#id7">Instrumentation</a><a class="headerlink" href="#instrumentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Is your code instrumented with StatsD?</li>
<li>Should it be?</li>
<li>Does it go out to Graphite?</li>
</ul>
</div>
<div class="section" id="deployment">
<h2><a class="toc-backref" href="#id8">Deployment</a><a class="headerlink" href="#deployment" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>Do you have a scripted solution for CI and CD?</dt>
<dd><ul class="first last">
<li>Jenkins</li>
<li><dl class="first docutils">
<dt>Circle</dt>
<dd><ul class="first last">
<li>See devops about Secrets. There are many ways to accidentially expose secrets during deploys with this service.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Travis</dt>
<dd><ul class="first last">
<li>See devops about Secrets. There are many ways to accidentially expose secrets during deploys with this service.</li>
</ul>
</dd>
</dl>
</li>
<li>Other</li>
</ul>
</dd>
</dl>
</li>
<li>Please make sure your devops person knows and a Jenkins job is all set.</li>
<li>Can you deploy independently of the rest of Firecloud? Can it deploy in FIAB if required?</li>
</ul>
</div>
<div class="section" id="encryption">
<h2><a class="toc-backref" href="#id9">Encryption</a><a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Are you using the Apache Proxy for the front-end to your application to terminate Encryption? You should.</li>
<li>Do you need a certificate for a non-<a href="#id1"><span class="problematic" id="id2">*</span></a>.dsde-&lt;ENV&gt;.broadinstitute.org URL? Ask your Devops team.</li>
<li><dl class="first docutils">
<dt>Are you using persistent storage anywhere (other than a SQL database)? Ask your Devops team about encrypting your storage.</dt>
<dd><ul class="first last">
<li>Is that storage backed-up somehow?</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="authentication">
<h2><a class="toc-backref" href="#id10">Authentication</a><a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>Is your service authenticated?</dt>
<dd><ul class="first last">
<li>You can use our Apache Proxy</li>
</ul>
</dd>
</dl>
</li>
<li>Is it service-to-service or “users” or both?</li>
<li><dl class="first docutils">
<dt>How are users or applications acquiring credentials?</dt>
<dd><ul class="first last">
<li>For instance, if a shared secret, are we putting it in vault or sending it via email (put it in Vault is the right answer).</li>
</ul>
</dd>
</dl>
</li>
<li>What scopes do you need? Will this need to change at any time?</li>
<li>What Redirect URLs will you need? Will this need to change at any time?</li>
</ul>
</div>
<div class="section" id="authorization">
<h2><a class="toc-backref" href="#id11">Authorization</a><a class="headerlink" href="#authorization" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>How does your service enforce Authorization?</dt>
<dd><ul class="first last">
<li>How does it revoke authorization?</li>
</ul>
</dd>
</dl>
</li>
<li>Does it log access attempts?</li>
</ul>
</div>
<div class="section" id="compliance">
<h2><a class="toc-backref" href="#id12">Compliance</a><a class="headerlink" href="#compliance" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><dl class="first docutils">
<dt>If this is an application in our Workbench, have you altered the diagram in the SSP?</dt>
<dd><ul class="first last">
<li>If you don’t know what this means, talk to Bernick or Albano.</li>
</ul>
</dd>
</dl>
</li>
<li>If this is an application in Workbench, have you built a “concept of operations” document?</li>
</ul>
</div>
<div class="section" id="code-scans">
<h2><a class="toc-backref" href="#id13">Code Scans</a><a class="headerlink" href="#code-scans" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ToDo</li>
</ul>
</div>
<div class="section" id="other-security-considerations">
<h2><a class="toc-backref" href="#id14">Other Security Considerations</a><a class="headerlink" href="#other-security-considerations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ToDo</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="security101.html" title="Security 101 - Guidelines"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Secure Coding"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">dsp-security-knowledgebase 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Secure Coding</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Broad Institute.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.3.
    </div>
  </body>
</html>